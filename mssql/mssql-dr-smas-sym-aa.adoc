---
sidebar: sidebar
permalink: mssql/mssql-dr-smas-sym-aa.html
keywords: MSSQL,SQL Server, Uniform and non-uniform path
summary: Microsoft SQL Server and SnapMirror active sync
---
= Microsoft SQL Server host with SnapMirror active sync and symmetric active/active
:imagesdir: ../media/

[.lead]
Starting in ONTAP 9.15.1, SnapMirror active sync (SM-as) also support symmetric active-active capability. A LUN can be accessed using two different clusters. All read I/O will be serviced by a cluster's local copy of the data, and write I/O is committed to both controllers before acknowledgement. 

The active/active capability in SM-as is enabled by using the protection policy AutomatedFailOverDuplex while creating a business continuity relationship. Both clusters provide read/write access with synchronous bidirectional replication ensuring that writes to either storage are consistently mirrored and managed. This setup is ideal for mission-critical applications and databases that provide seamless failover without any perceived downtime, and also require symmetric I/O performance. 

== Uniform host access

Uniform host access means all paths on both ONTAP storage clusters are available to hosts. The result is a SQL Server database host will access LUNs on both the local storage and remote storage systems. In case of storage failure, the host will experience the lost of some, but not all paths and can continue to serve IOs for database transactions. This model ensures consistent and seamless data access for enhanced operational continuity. This is suitable for environments prioritizing high connectivity and data availability.

image:mssql-smas-uniform.png[Error: Missing Graphic Image]

In uniform host access, the SQL Server host will be performing IO's using paths to ONTAP storage systems irrespective of their location. The result is I/O to a remote path may have higher latency compared to local storage. In some configurations, such as with the use of dark fiber between sites, this additional latency may be negligible. If the remote storage connection uses a telco-supplied WAN connection, it may add enough latency to create problems. In such cases, it may be preferable to run SM-as in asymmetric mode to allow certain paths to be deprioritized.

== Non-uniform host access

In a non-uniform host access setup, each host can be configured to "see" only the local storage system. 

image:mssql-smas-nonuniform.png[Error: Missing Graphic Image]

To setup non-uniform host access, simply register only the local storage detail and not the remote storage details in the host configuration. 

[NOTE]
In either case of setup, there is no limitation due to distance but SnapMirror active sync requires less than 10ms of round trip time (RTT) latency between the ONTAP storages. 
