---
sidebar: sidebar
permalink: mssql/mssql-dr-smas-uniform.html
keywords: MSSQL,SQL Server, SnapMirror active sync, SMBC, overview
summary: Microsoft SQL Server and SM-as uniform access
searchtitle: Microsoft SQL Server and SM-as uniform access
---
= Uniform access
:hardbreaks:
:icons: font
:linkattrs:
:imagesdir: ../media/

[.lead]
Uniform access networking means hosts are able to access paths on both sites (or failure domains within the same site). 

An important feature of SM-as is the ability to configure the storage systems to know where the hosts are located. When you map the LUNs to a given host, you can indicate whether or not they are proximal to a given storage system.

== Proximity settings

Proximity refers to a per-cluster configuration that indicates a particular host WWN or iSCSI initiator ID belongs to a local host. It is a second, optional step for configuring LUN access.

The first step is the usual igroup configuration. Each LUN must be mapped to an igroup that contains the WWN/iSCSi IDs of the hosts that need access to that LUN. This controls which host has _access_ to a LUN. 

The second, optional step is to configure host proximity. This does not control access, it controls _priority_. 

For example, a host at site A might be configured to access a LUN that is protected by SnapMirror active sync, and since the SAN is extended across sites, paths are available to that LUN using storage on site A or storage on site B.

Without proximity settings, that host will use both storage systems equally because both storage systems will advertise active/optimized paths. If the SAN latency and/or bandwidth between sites is limited, this may not be desireable, and you may wish to ensure that during normal operation each host preferentially uses paths to the local storage system. This is configured by adding the host WWN/iSCSI ID to the local cluster as a proximal host. This can be done at the CLI or SystemManager.

== AFF

With an AFF system, the paths would appear as shown below when host proximity has been configured.

image:smas-uniform-aff.png[SnapMirror active sync AFF uniform networking]

In normal operation, all IO is local IO. Reads and writes are serviced from the local storage array. Write IO will, of course, also need to be replicated by the local controller to the remote system before being acknowledged, but all read IO will be serviced locally and will not incur extra latency by traversing the SAN link between sites.

The only time the nonoptimized paths will be used is when all active/optimized paths are lost. For example, if the entire array on site A lost power, the hosts at site A would still be able to access paths to the array on site B and therefore remain operational, although they would be experiencing higher latency. 

[Note]
There are redundant paths through the local cluster that are not shown on these diagrams for the sake of simplicity. ONTAP storage systems are HA themselves, so a controller failure should not result in site failure. It should merely result in a change in which local paths are used on the affected site.
