---
sidebar: sidebar
permalink: mssql/mssql-dr-smas-hostconnectivty.html
keywords: MSSQL,SQL Server, Uniform and non-uniform path
summary: Microsoft SQL Server and SnapMirror active sync
---
= Microsoft SQL Server host and ONTAP access
:imagesdir: ../media/

[.lead]
With SnapMirror active sync capability to read/write between independent storage cluster in each failure domain, there are different ways SQL Server database host can be configured to connect to ONTAP storage.

While setting up path between host and storage, the host can use uniform access or non-uniform access.Paths are managed through asymmetric logical unit access (ALUA), which is an industry standard protocol for identifying optimized paths. Generally, the device path that is the shortest to access I/O is considered Active/Optimized paths and the rest of the paths are considered Active/Nonoptimized paths.

== Uniform host access

Uniform host access have connectivity of each host to ONTAP storage paticiapting in SnapMirror active sync. SQL Server database host will have access to LUN at local storage and remote storage. In case of storage failure, host will access path that connects to remote storage and continue to serve IO's for application transaction. With this model,  it ensures consistent and seemless data ccess for enhaced operational continuity. This is suitable for environmens priortizing high connectivity and ubiquitous data availability.

The image above represents the logical paths that exist between the hosts and arrays, and the replication connection between the two arrays in a uniform access model. Because a uniform storage access model allows all hosts, regardless of site location, to access both arrays, there will be paths with different latency characteristics. Paths from hosts to the local array will have lower latency; paths from each local host to the remote array will have higher latency. For the best performance in an active/active synchronous replication environment, hosts should be prevented from using paths that access the remote array unless it is ecessary. For example, in the image below, if the host SQL Server were to perform a write to volume A over the host side connection to array A, that write would incur 2X the latency of the inter-site link (1X for each traverse of the network). The write would experience 11ms of latency for the trip from host B to array A and experience another 11ms of latency while array A synchronously sends the write back to array B


== Non-uniform host access

In non-uniform host access setup, each host will be connected to one of the storage where both are in same site. Replication between the storage will happen through ethernet connectivity. This promotes local host access, optimizing performance within individual sites, so, this is suitable for environments requiring local data management and boosted site-specific performance. 

image:mssql-smas-nonuniform.png[Error: Missing Graphic Image]

To setup non-uniform host access, simply register only the local storage detail and not the remote storage details in host configuration. 

[Note]
In either case of setup, there is no limitation due to distance but SnapMirror active sync requires less than 10ms of round trip time (RTT) latency between the ONTAP storages. 
