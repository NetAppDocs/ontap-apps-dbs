---
sidebar: sidebar
permalink: mssql/mssql-dr-smas-sym-aa.html
keywords: MSSQL,SQL Server, Uniform and non-uniform path
summary: Microsoft SQL Server and SnapMirror active sync
---
= Microsoft SQL Server host with SnapMirror active sync and symmetric active/active
:imagesdir: ../media/

[.lead]
With SnapMirror active sync capability to read/write between independent storage cluster in each failure domain, there are different ways SQL Server database host can be configured to connect to ONTAP storage.

SnapMirror active sync symmetric active/active is enabled by using protection policy AutomatedFailOverDuplex while creating business continuity relationship. Both primary and secondary storage provide read/write access with synchronous bidirectional replication ensuring writes to either storage are consistently mirrored and managed. This setup is ideal for mission critical applications and databases that provides seamless failover without any perceived downtime.

While setting up path between host and storage, the host can use uniform access or non-uniform access.Paths are managed through asymmetric logical unit access (ALUA), which is an industry standard protocol for identifying optimized paths. Generally, the device path that is the shortest to access I/O is considered Active/Optimized paths and the rest of the paths are considered Active/Nonoptimized paths.

== Uniform host access

Uniform host access have connectivity of each host to ONTAP storage paticiapting in SnapMirror active sync. SQL Server database host will have access to LUN at local storage and remote storage. In case of storage failure, host will access path that connects to remote storage and continue to serve IO's for application transaction. With this model,  it ensures consistent and seemless data ccess for enhaced operational continuity. This is suitable for environmens priortizing high connectivity and ubiquitous data availability.

image:mssql-smas-uniform.png[Error: Missing Graphic Image]

In uniform host access, SQL Server can access storage from both site, local and remote, irrespective of its location. Host access to remote storage may have higher latency compared to local storage. For example, when write operation is triggered from SQL Server, the operation occurs on local storage and remote storage. As IO processes from remote storage, the round trip could incude latency to post data and get acknowledgement depending on network speed. 

[TIP]
NetApp recommends database server should be configured to use storage path that is near to SQL Server host. This can be configured using host proximity option in SnapMirror active sync.

== Non-uniform host access

In non-uniform host access setup, each host will be connected to one of the storage where both are in same site. Replication between the storage will happen through ethernet connectivity. This promotes local host access, optimizing performance within individual sites, so, this is suitable for environments requiring local data management and boosted site-specific performance. 

image:mssql-smas-nonuniform.png[Error: Missing Graphic Image]

To setup non-uniform host access, simply register only the local storage detail and not the remote storage details in host configuration. 

[NOTE]
In either case of setup, there is no limitation due to distance but SnapMirror active sync requires less than 10ms of round trip time (RTT) latency between the ONTAP storages. 
